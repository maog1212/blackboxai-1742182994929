# å¿«é€Ÿå…¥é—¨æŒ‡å—

## 5åˆ†é’Ÿéƒ¨ç½²

### å‰ç½®æ¡ä»¶

ç¡®ä¿å·²å®‰è£…:
- Docker 20.10+
- Docker Compose 2.0+

### å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

#### 1. è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd vulnerability-detection-system
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
```

**æœ€å°é…ç½®ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰:**
```bash
# ç¼–è¾‘ .env æ–‡ä»¶
vim .env

# ä¿®æ”¹ä»¥ä¸‹å‚æ•°:
JWT_SECRET=your_secret_key_here_change_this  # æ”¹æˆéšæœºå­—ç¬¦ä¸²
DATABASE_PASSWORD=your_secure_password        # æ”¹æˆå¼ºå¯†ç 
```

#### 3. å¯åŠ¨ç³»ç»Ÿ

```bash
./scripts/deploy-local.sh
```

ç­‰å¾…çº¦2åˆ†é’Ÿï¼Œç³»ç»Ÿå°†è‡ªåŠ¨:
- æ„å»ºæ‰€æœ‰æœåŠ¡é•œåƒ
- å¯åŠ¨æ•°æ®åº“å’Œæ¶ˆæ¯é˜Ÿåˆ—
- åˆå§‹åŒ–æ•°æ®åº“ç»“æ„
- å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡
- å¯åŠ¨ç›‘æ§ç³»ç»Ÿ

#### 4. éªŒè¯éƒ¨ç½²

è®¿é—®ä»¥ä¸‹åœ°å€:

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| APIç½‘å…³ | http://localhost:8080 | ä¸»è¦APIå…¥å£ |
| Prometheus | http://localhost:9090 | ç›‘æ§æŒ‡æ ‡ |
| Grafana | http://localhost:3000 | å¯è§†åŒ–ä»ªè¡¨æ¿ |
| RabbitMQ | http://localhost:15672 | æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç† |

#### 5. é¦–æ¬¡ç™»å½•

**APIè®¤è¯:**
```bash
# è·å–è®¿é—®ä»¤ç‰Œ
TOKEN=$(curl -X POST http://localhost:8080/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin"}' \
  | jq -r '.access_token')

echo "Token: $TOKEN"
```

**Grafanaç™»å½•:**
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin_password`

## ç¬¬ä¸€æ¬¡æ‰«æ

### 1. å¯åŠ¨æ‰«æä»»åŠ¡

```bash
# æ‰«ææœ¬åœ°ç½‘ç»œ
curl -X POST http://localhost:8080/api/v1/scan \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "target": "192.168.1.0/24",
    "scan_type": "full_scan",
    "priority": "high"
  }'
```

å“åº”ç¤ºä¾‹:
```json
{
  "scan_id": "abc123...",
  "status": "initiated",
  "message": "æ‰«æä»»åŠ¡å·²åˆ›å»º"
}
```

### 2. æŸ¥çœ‹æ‰«æçŠ¶æ€

```bash
SCAN_ID="abc123..."  # ä½¿ç”¨ä¸Šä¸€æ­¥è¿”å›çš„scan_id

curl http://localhost:8080/api/v1/scan/$SCAN_ID \
  -H "Authorization: Bearer $TOKEN"
```

### 3. è·å–æ‰«æç»“æœ

```bash
curl http://localhost:8080/api/v1/scan/$SCAN_ID/results \
  -H "Authorization: Bearer $TOKEN" | jq
```

## å¸¸ç”¨æ“ä½œ

### èµ„äº§å‘ç°

```bash
curl -X POST http://localhost:8080/api/v1/discover-assets \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"target_range": "192.168.1.0/24"}'
```

### åˆ›å»ºä¿®å¤è®¡åˆ’

```bash
curl -X POST http://localhost:8080/api/v1/remediation/plan \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "vuln_id": "vuln-001",
    "cve_id": "CVE-2023-12345",
    "severity": "high",
    "affected_component": "Apache/2.4.49",
    "version": "2.4.49"
  }'
```

### å‘é€é€šçŸ¥

```bash
curl -X POST http://localhost:8080/api/v1/notify \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "slack",
    "recipients": [],
    "subject": "æµ‹è¯•é€šçŸ¥",
    "message": "è¿™æ˜¯ä¸€æ¡æµ‹è¯•é€šçŸ¥",
    "severity": "info"
  }'
```

### ç”ŸæˆæŠ¥å‘Š

```bash
curl -X POST http://localhost:8080/api/v1/report \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "report_type": "vulnerability",
    "format": "json",
    "start_date": "2023-10-01",
    "end_date": "2023-10-31"
  }' | jq
```

## æŸ¥çœ‹æ—¥å¿—

### æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
```bash
docker-compose logs -f
```

### æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
```bash
docker-compose logs -f scanner
docker-compose logs -f detection-engine
docker-compose logs -f api-gateway
```

## åœæ­¢ç³»ç»Ÿ

```bash
docker-compose down
```

## å®Œå…¨æ¸…ç†ï¼ˆåŒ…æ‹¬æ•°æ®ï¼‰

```bash
docker-compose down -v
```

## ç›‘æ§ä»ªè¡¨æ¿

### PrometheusæŸ¥è¯¢ç¤ºä¾‹

è®¿é—® http://localhost:9090 å¹¶å°è¯•:

```promql
# æ‰«æä»»åŠ¡æ€»æ•°
vulnerability_scans_total

# APIè¯·æ±‚é€Ÿç‡
rate(api_requests_total[5m])

# å‘ç°çš„æ¼æ´æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»
sum by (severity) (vulnerabilities_found_total)
```

### Grafanaä»ªè¡¨æ¿

è®¿é—® http://localhost:3000 å¹¶:
1. ä½¿ç”¨ admin/admin_password ç™»å½•
2. æ·»åŠ Prometheusæ•°æ®æºï¼ˆå·²è‡ªåŠ¨é…ç½®ï¼‰
3. åˆ›å»ºè‡ªå®šä¹‰ä»ªè¡¨æ¿æˆ–å¯¼å…¥é¢„è®¾æ¨¡æ¿

## ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯» [å®Œæ•´APIæ–‡æ¡£](docs/api-documentation.md)
- ğŸ“˜ æŸ¥çœ‹ [æ“ä½œæ‰‹å†Œ](docs/operations-manual.md)
- âš™ï¸ é…ç½®å®šæœŸæ‰«æè®¡åˆ’
- ğŸ“§ è®¾ç½®é‚®ä»¶å’ŒSlacké€šçŸ¥
- ğŸ”’ é…ç½®TLSåŠ å¯†
- ğŸš€ éƒ¨ç½²åˆ°Kubernetesç”Ÿäº§ç¯å¢ƒ

## å¸¸è§é—®é¢˜

### Q: æœåŠ¡æ— æ³•å¯åŠ¨ï¼Ÿ
A: æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œç¡®ä¿8080-8084ã€5432ã€6379ã€5672ã€9090ã€3000ç­‰ç«¯å£å¯ç”¨ã€‚

### Q: æ‰«æå¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç›®æ ‡ç½‘ç»œæ˜¯å¦å¯è¾¾ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿçš„æƒé™è¿›è¡Œç½‘ç»œæ‰«æã€‚

### Q: æ— æ³•æ¥æ”¶é€šçŸ¥ï¼Ÿ
A: æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„SMTPæˆ–Slacké…ç½®æ˜¯å¦æ­£ç¡®ã€‚

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
A: ç­‰å¾…PostgreSQLå®Œå…¨å¯åŠ¨ï¼ˆçº¦30ç§’ï¼‰ï¼Œæˆ–æ£€æŸ¥docker-composeæ—¥å¿—ã€‚

## æŠ€æœ¯æ”¯æŒ

- ğŸ“§ Email: support@example.com
- ğŸ“š æ–‡æ¡£: [å®Œæ•´æ–‡æ¡£](README.md)
- ğŸ› é—®é¢˜åé¦ˆ: GitHub Issues
